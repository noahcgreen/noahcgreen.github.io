<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>CME Calculator | Noah C. Green</title> <meta name="author" content="Noah C. Green"> <meta name="description" content="Analysis and design of a CME steam battery"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8E%B5&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://noahc.green/projects/cme_calculator/"> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Noah </span>C. Green</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">CME Calculator</h1> <p class="post-description">Analysis and design of a CME steam battery</p> </header> <article> <p>I’ve been having a lot of fun playing the <a href="https://spaceexploration.miraheze.org/wiki/Main_Page" rel="external nofollow noopener" target="_blank">Space Exploration</a> Factorio mod lately. It adds a lot of complexity to the game and introduces many new challenges which must be solved in addition to what the vanilla gameplay requires. One of these is the coronal mass ejection (CME) event, in which the player must defend their base from energy beams by providing an Umbrella defense facility with a massive amount of electrical power.</p> <p>I did not understand the power requirements properly the first time around and failed to defend against the first CME. Fortunately, my base was only lightly damaged, but I decided to make this writeup and a simple calculator to make it clear how to defend against CME’s to come.</p> <p>For simplicity, I’ve just gone over calculations for a 500-degree steam battery. There are other ways to satisfy the energy requirements, but this is the most straightforward and practical one for a beginner IMO.</p> <hr> <div class="calculator"> <form> <h3>CME Calculator</h3> <table> <tr> <td><label for="radius">Planet radius</label></td> <td><input id="radius" type="number" value="5692" min="0" step="any"></td> </tr> <tr> <td><label for="solar">Solar modifier</label></td> <td><input id="solar" type="number" value="100" min="0"></td> </tr> <tr> <td><label for="duration">CME duration (seconds)</label></td> <td><input id="duration" type="number" value="120" min="0"></td> </tr> <tr> <td><label for="boilers">Boilers</label></td> <td><input id="boilers" type="number" value="1" min="0"></td> </tr> </table> <div> <input type="submit"> </div> </form> <br> <div> <h3>Battery Requirements</h3> <table> <tr> <td>Discharge rate</td> <td> <span id="peak-power">2.28</span> GW</td> </tr> <tr> <td>Capacity</td> <td> <span id="total-power">182.4</span> GJ</td> </tr> <tr> <td>Steam tanks</td> <td><span id="steam-tanks">76</span></td> </tr> <tr> <td>Turbines</td> <td><span id="turbines">394</span></td> </tr> <tr> <td>Charging time</td> <td><span id="charge-time">4 hours</span></td> </tr> <tr> <td>Charging power</td> <td> <span id="charge-power">16</span> MW</td> </tr> </table> </div> </div> <hr> <h2 id="the-problem">The Problem</h2> <p>Defending against a CME means providing an Umbrella defense facility with enough power to operate over the two-minute duration of the event. If the Umbrella’s power requirements are fully satisfied for the entire two minutes, the energy beams will be blocked. However, if at any point the Umbrella does not receive enough power, it will fail. Even a single moment of failure will cause the player’s planet to be hit by deadly CME beams, so it’s important to understand the power requirements well.</p> <p>The amount of energy which the Umbrella requires is dependent on two factors: the radius and solar modifier of the defending planet. The <a href="https://spaceexploration.miraheze.org/wiki/Umbrella" rel="external nofollow noopener" target="_blank">wiki</a> describes how to calculate the peak power draw, which is the maximum amount of power required by the Umbrella halfway through the CME:</p> \[\text{peak power draw} = \frac{2 \times \text{radius} \times \text{solar modifier}}{5000} \ \text{GW}\] <p>For example, the homeworld Nauvis has a radius of 5692 and a solar modifier of 100%, so its peak power draw is</p> \[\frac{2 \times 5692 \times 1}{5000} = 2.2768 \ \text{GW}\] <p>To put things into perspective, a beginner base on Nauvis might use a double-digit number of megawatts, so this requires <em>hundreds</em> of times more power than a vanilla player is likely used to building.</p> <p>Now, it is possible to avoid the CME by simply supplying the Umbrella with 2.28 GW of power at all times. However, there’s a significant downside to this: The Umbrella will only consume that much power at the peak of the event, exactly halfway through its two-minute duration. During the rest of that time, any excess power goes unused. On top of that, <em>all</em> of that power will go unused when there is no CME to defend against. Producing 2.28 GW constantly requires a <em>lot</em> of resources, and it’s pretty wasteful to maintain if you won’t actively use that much electricity.</p> <p>A better solution is to store just enough energy to meet the CME requirements in a battery. Excess energy produced by the base will be used to fill up the battery prior to the CME. When the CME arrives, the Umbrella will draw power from the battery instead of the base. This means that we can develop the two systems — the base and the battery - independently of each other and we don’t have to worry about over- or under-developing one of them.</p> <h2 id="how-much-energy-does-a-cme-consume">How Much Energy Does a CME consume?</h2> <p>We have a formula for the maximum amount of power consumed by an Umbrella halfway through a CME. However, the defense facility doesn’t actually draw that much at other points in the event. The power consumption follows a parabolic curve; it consumes zero power at the beginning of the event, ramps up to peak power consumption at the halfway point, then lowers consumption back to zero at the end of the CME. We can use this to determine exactly how much power is consumed throughout, which is the amount we’ll need to store.</p> <p>Since the power draw at time \(t\) is a parabola, it has the form \(p(t) = at^2 + bt + c\) for some parameters \(a, b, c\). Let’s say \(T = 120\) is the duration of the event in seconds. We know the power draw \(p(t)\) at three times:</p> \[\begin{gathered} p(0) = 0 \\ p\left( \frac{T}{2} \right) = P \\ p(T) = 0 \end{gathered}\] <p>This gives us a system of three equations in the three unknowns \(a, b, c\), so we can solve for them and discover that the power draw at time \(t\) is</p> \[p(t) = -\frac{4P}{T^2} t^2 + \frac{4P}{T} t \quad \text{(GW)}\] <p>To get the total power consumption, we integrate this function over the duration of the event:</p> \[E = \text{total power consumed} = \int_0^T p(t) \mathop{}\!\mathrm{d}t = \frac{2PT}{3} \quad \text{(GJ)}\] <p>For Nauvis, we’ll need \(\frac{2 \times 2.28 \times 120}{3} = 182.4\) GJ of stored power to operate the Umbrella. That lines up nicely with what’s described in the <a href="https://spaceexploration.miraheze.org/wiki/Umbrella" rel="external nofollow noopener" target="_blank">wiki</a>!</p> <h2 id="scalable-energy-storage-and-production">Scalable Energy Storage and Production</h2> <p>Now that we know how much energy our battery needs to store, let’s talk about how we’ll construct it. Vanilla Factorio players are most likely to be familiar with using accumulators to store excess energy. However, a single accumulator can only store up to 5 MJ. That means we’d need 36,480 accumulators to store 182.4 GJ! Putting aside the amount of raw materials necessary to build that many accumulators, consider the amount of time it would take to build them. Even if you produced one accumulator per second (a single assembler takes ten), it would take over ten hours to produce that many. Even if the space required to place them was trivial (it is not), think about how long it would take to place each one (unless you had tens of thousands of construction robots, but then you need to factor in the time and cost of building those, etc.).</p> <p>The recommended method for building a CME battery is to use high-temperature steam. Electric boilers effectively convert excess electricity to 500-degree steam which can be stored in tanks. The steam is converted back into electricity by steam turbines. 500-degree steam is a much denser form of energy storage than accumulators: a single turbine converts 60 steam into 5.8 MW of electricity in one second, meaning a single unit of steam stores 0.096 MJ. One tank holds 25,000 steam, or about 2.4 GJ! We can store enough energy for a Nauvis CME in only \(\frac{182.4}{2.4} = 76\) tanks.</p> <p>It’s important to consider how many turbines we’ll need. We need enough to to satisfy the peak power draw. (This is where I messed up initially - I used the average power draw instead of the peak.) A single turbine has an output rate of 5.8 MW, so we’ll need \(\frac{P}{0.0058}\) turbines (\(\frac{2.28}{0.0058} \approx 394\) for Nauvis).</p> <p>The final consideration is how many boilers we should use to charge our battery. Technically, we could just use one, but it would take quite a while. A single boiler produces 100 steam in 2.15 seconds, consuming 5.18 MW of power as it does. We need \(\frac{60 \times E}{0.0058}\) steam, so it’ll take \(B\) boilers</p> \[\frac{60 \times E}{0.0058} \times \frac{2.15}{\text{boilers} \times 100}\] <p>many seconds to fill the battery. A single boiler for Nauvis would take over 11 hours. Using more boilers cuts down the charging time, but each boiler requires electricity (and water) to run.</p> <h2 id="recap">Recap</h2> <p>Let’s put it all together. Suppose we’re defending a planet with radius \(R\) and solar percent \(S\) against a CME lasting \(T\) seconds. We’ll use \(B\) many boilers to charge our battery. Our battery will need to discharge up to \(P = \frac{2RS}{5000}\) GW and store \(E = \frac{2PT}{3}\) GJ. We’ll need:</p> <ul> <li>\(\frac{60 \times E}{0.0058}\) units of steam, or \(\frac{60 \times E}{0.0058 \times 25000}\) full tanks</li> <li>\(\frac{P}{0.0058}\) turbines</li> <li>\(\frac{2.15}{100 \times B} \times \frac{60 \times E}{0.0058} \times \frac{1}{3600}\) hours for the battery to charge.</li> <li>\(5.18 B\) MW of excess energy to power the boilers.</li> </ul> <script type="text/javascript">function formatHours(e){const t=Math.floor(e),u=Math.ceil(60*(e-t));return`${t} ${1==t?"hour":"hours"}, ${u} ${1==u?"minute":"minutes"}`}function calculateCMERequirements(){results.peakPower=2*inputs.radius.value*(inputs.solar.value/100)/5e3,results.totalPower=2/3*results.peakPower*inputs.duration.value,results.turbines=results.peakPower/.0058,results.steam=60*results.totalPower/.0058,results.tanks=results.steam/25e3,results.chargeTime=2.15*results.steam/(100*inputs.boilers.value*3600),results.boilerPower=5.18*inputs.boilers.value,outputs.peakPower.textContent=results.peakPower.toFixed(2),outputs.totalPower.textContent=results.totalPower.toFixed(2),outputs.steamTanks.textContent=Math.ceil(results.tanks),outputs.turbines.textContent=Math.ceil(results.turbines),outputs.chargeTime.textContent=formatHours(results.chargeTime),outputs.chargePower.textContent=results.boilerPower.toFixed(2)}const inputs={radius:document.getElementById("radius"),solar:document.getElementById("solar"),duration:document.getElementById("duration"),boilers:document.getElementById("boilers")},outputs={peakPower:document.getElementById("peak-power"),totalPower:document.getElementById("total-power"),steamTanks:document.getElementById("steam-tanks"),turbines:document.getElementById("turbines"),chargeTime:document.getElementById("charge-time"),chargePower:document.getElementById("charge-power")},results={peakPower:null,totalPower:null,turbines:null,steam:null,tanks:null,chargeTime:null,boilerPower:null};calculateCMERequirements(),document.querySelector("form").addEventListener("submit",e=>{e.preventDefault(),calculateCMERequirements()});</script> <style type="text/css">.calculator h3{text-align:center}.calculator table{margin-left:auto;margin-right:auto;border-collapse:separate;border-spacing:1em 0}.calculator input{width:5em}.calculator>form>div{text-align:center}</style> </article> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>